SET GLOBAL innodb_adaptive_hash_index = OFF;
CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    price DECIMAL(10, 2) NOT NULL,
    description TEXT
);

INSERT INTO products (name, price, description) VALUES
('Laptop', 1200.00, 'High-performance laptop with 16GB RAM and 512GB SSD'),
('Mouse', 25.00, 'Wireless optical mouse'),
('Keyboard', 75.00, 'Mechanical keyboard with RGB lighting');

CREATE TABLE orders (
    id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT NOT NULL,
    order_date TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

INSERT INTO orders (customer_id) VALUES (1), (2), (1);

CREATE TABLE order_items (
    id INT PRIMARY KEY AUTO_INCREMENT,
    order_id INT NOT NULL,
    product_id INT NOT NULL,
    quantity INT NOT NULL DEFAULT 1,
    FOREIGN KEY (order_id) REFERENCES orders(id),
    FOREIGN KEY (product_id) REFERENCES products(id)
);

INSERT INTO order_items (order_id, product_id, quantity) VALUES
(1, 1, 1), (1, 2, 2), (2, 3, 1), (3, 1, 1);

ALTER TABLE products ADD FULLTEXT(name, description);

SELECT * FROM products WHERE MATCH (name, description) AGAINST ('laptop' IN NATURAL LANGUAGE MODE);

CREATE PROCEDURE update_price (IN product_name VARCHAR(255), IN new_price DECIMAL(10, 2))
BEGIN
    UPDATE products SET price = new_price WHERE name = product_name;
END;

CALL update_price('Mouse', 30.00);

SELECT * FROM products;

ANALYZE TABLE products, orders, order_items;

SHOW INDEX FROM products;

SELECT * FROM INFORMATION_SCHEMA.TABLES WHERE TABLE_SCHEMA = DATABASE() AND TABLE_NAME = 'products';