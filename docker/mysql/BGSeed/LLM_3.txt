CREATE TABLE employees (
    id INT PRIMARY KEY AUTO_INCREMENT,
    first_name VARCHAR(50) NOT NULL,
    last_name VARCHAR(50) NOT NULL,
    email VARCHAR(100) UNIQUE,
    phone_number VARCHAR(20),
    hire_date DATE NOT NULL,
    job_id INT,
    salary DECIMAL(10, 2),
    commission_pct DECIMAL(4, 2),
    manager_id INT,
    department_id INT
);

INSERT INTO employees (first_name, last_name, email, hire_date, job_id, salary, department_id) VALUES
('John', 'Doe', 'john.doe@example.com', '2022-01-15', 1, 60000.00, 10),
('Jane', 'Smith', 'jane.smith@example.com', '2023-03-20', 2, 75000.00, 20),
('Peter', 'Jones', 'peter.jones@example.com', '2022-05-10', 3, 90000.00, 30);

CREATE INDEX idx_last_name ON employees (last_name);

ALTER TABLE employees ADD COLUMN bonus INT DEFAULT 0;

SELECT first_name, last_name FROM employees WHERE salary > (SELECT AVG(salary) FROM employees);

-- MySQL Specific: Using Window Function
SELECT first_name, last_name, salary,
       RANK() OVER (ORDER BY salary DESC) AS salary_rank
FROM employees;

-- MySQL Specific: Using FIND_IN_SET
SELECT first_name FROM employees WHERE FIND_IN_SET('Doe', last_name);