CREATE TABLE products (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    description TEXT,
    price DECIMAL(10, 2) NOT NULL,
    quantity INT UNSIGNED DEFAULT 0,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    updated_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP ON UPDATE CURRENT_TIMESTAMP,
    INDEX (name),
    FULLTEXT (description)
) ENGINE=InnoDB;

INSERT INTO products (name, description, price, quantity) VALUES
('Awesome Widget', 'A truly awesome widget for all your widgeting needs.', 19.99, 100),
('Deluxe Gadget', 'The ultimate gadget, packed with features.', 49.99, 50),
('Simple Thing', 'A simple thing that does simple things.', 9.99, 200);

CREATE TABLE orders (
    id INT PRIMARY KEY AUTO_INCREMENT,
    customer_id INT NOT NULL,
    order_date DATETIME DEFAULT CURRENT_TIMESTAMP,
    total_amount DECIMAL(10, 2) NOT NULL
);

INSERT INTO orders (customer_id, total_amount) VALUES
(1, 19.99),
(2, 99.98),
(1, 49.99);

-- MySQL Specific: Testing JSON functionality
ALTER TABLE products ADD COLUMN attributes JSON;
UPDATE products SET attributes = '{"color": "red", "size": "medium"}' WHERE id = 1;

-- MySQL Specific: Using stored procedure to update data
DELIMITER //
CREATE PROCEDURE UpdateProductQuantity (IN product_id INT, IN new_quantity INT)
BEGIN
    UPDATE products SET quantity = new_quantity WHERE id = product_id;
END //
DELIMITER ;

CALL UpdateProductQuantity(1, 150);