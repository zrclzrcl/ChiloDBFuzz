SET autocommit=0;
SET unique_checks=0;
SET foreign_key_checks=0;
SET sql_mode='NO_AUTO_VALUE_ON_ZERO';
SET NAMES utf8mb4;
SET time_zone = '+00:00';

DROP TABLE IF EXISTS `users`;
CREATE TABLE `users` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `username` varchar(50) NOT NULL,
  `email` varchar(100) DEFAULT NULL,
  `password` varchar(255) NOT NULL,
  `created_at` timestamp NOT NULL DEFAULT CURRENT_TIMESTAMP,
  PRIMARY KEY (`id`),
  UNIQUE KEY `username` (`username`),
  UNIQUE KEY `email` (`email`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `users` (`id`, `username`, `email`, `password`) VALUES
(1, 'testuser', 'test@example.com', 'password123');

DROP PROCEDURE IF EXISTS `test_procedure`;
DELIMITER //
CREATE PROCEDURE `test_procedure`()
BEGIN
    SELECT * FROM `users` WHERE `id` = 1;
END//
DELIMITER ;

CALL `test_procedure`();

SET @test_variable = 10;
SELECT @test_variable;

CREATE OR REPLACE VIEW `user_view` AS
SELECT `id`, `username`, `email` FROM `users`;

SELECT * FROM `user_view`;

FLUSH TABLES `users`;

SHOW STATUS LIKE 'Uptime';

COMMIT;