CREATE TABLE employees (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255) NOT NULL,
    department VARCHAR(255),
    salary DECIMAL(10, 2)
);

INSERT INTO employees (name, department, salary) VALUES
('Alice', 'Sales', 50000.00),
('Bob', 'Marketing', 60000.00),
('Charlie', 'Sales', 55000.00),
('David', 'Engineering', 70000.00),
('Eve', 'Engineering', 75000.00);

-- MariaDB specific feature: Window function with RANGE clause
SELECT
    name,
    department,
    salary,
    AVG(salary) OVER (PARTITION BY department ORDER BY salary RANGE BETWEEN 5000 PRECEDING AND 5000 FOLLOWING) AS avg_salary_range
FROM employees;

-- MariaDB specific feature: JSON functions
CREATE TABLE config (
    id INT PRIMARY KEY AUTO_INCREMENT,
    settings JSON
);

INSERT INTO config (settings) VALUES
('{"theme": "dark", "font_size": 12, "notifications": {"email": true, "push": false}}');

SELECT settings->'$.theme', settings->'$.notifications.email' FROM config WHERE id = 1;

-- GIS functionality (MariaDB has spatial extensions)
CREATE TABLE locations (
    id INT PRIMARY KEY AUTO_INCREMENT,
    name VARCHAR(255),
    location POINT SRID 4326
);

INSERT INTO locations (name, location) VALUES
('Office', ST_GeomFromText('POINT(12.9716 77.5946)', 4326));

SELECT ST_AsText(location) FROM locations WHERE name = 'Office';