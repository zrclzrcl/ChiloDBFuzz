SET @old_sql_mode=@@sql_mode, sql_mode='STRICT_ALL_TABLES';
SET @auto_increment_increment=@@auto_increment_increment;
SET @auto_increment_offset=@@auto_increment_offset;
SET @@session.time_zone='+00:00';
CREATE TABLE t1 (a INT PRIMARY KEY, b VARCHAR(255));
CREATE TABLE t2 (c INT PRIMARY KEY, d INT, FOREIGN KEY (d) REFERENCES t1(a));
INSERT INTO t1 (a, b) VALUES (1, 'test1'), (2, 'test2');
INSERT INTO t2 (c, d) VALUES (10, 1), (20, 2);
ALTER TABLE t1 ADD COLUMN e JSON;
UPDATE t1 SET e = '{"key1": "value1", "key2": 123}' WHERE a = 1;
CREATE OR REPLACE VIEW v1 AS SELECT t1.a, t1.b, t2.c FROM t1 JOIN t2 ON t1.a = t2.d;
SELECT * FROM v1 WHERE a > 0;
SET GLOBAL auto_increment_increment=3;
SET GLOBAL auto_increment_offset=5;
CREATE TABLE t3 (id INT AUTO_INCREMENT PRIMARY KEY, val VARCHAR(255));
INSERT INTO t3 (val) VALUES ('test_auto_inc');
SELECT LAST_INSERT_ID();
DROP VIEW IF EXISTS v1;
DROP TABLE IF EXISTS t1, t2, t3;
SET sql_mode=@old_sql_mode;
SET GLOBAL auto_increment_increment=@auto_increment_increment;
SET GLOBAL auto_increment_offset=@auto_increment_offset;