SET GLOBAL optimizer_switch = 'derived_merge=off';
CREATE TABLE `geometries` (
  `id` int(11) NOT NULL AUTO_INCREMENT,
  `geom` geometry NOT NULL,
  `name` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`),
  SPATIAL INDEX(`geom`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;

INSERT INTO `geometries` (`geom`, `name`) VALUES
(ST_GeomFromText('POINT(1 1)'), 'Point A'),
(ST_GeomFromText('LINESTRING(0 0, 1 1, 2 1, 2 2)'), 'Line A'),
(ST_GeomFromText('POLYGON((0 0, 1 0, 1 1, 0 1, 0 0))'), 'Polygon A');

CREATE TABLE `json_test` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `data` JSON
);

INSERT INTO `json_test` (`data`) VALUES
('{"name": "Alice", "age": 30, "city": "New York"}'),
('{"name": "Bob", "age": 25, "city": "Los Angeles", "hobbies": ["reading", "hiking"]}');

SELECT JSON_EXTRACT(`data`, '$.name') FROM `json_test`;

CREATE TABLE `dynamic_columns_test` (
  `id` INT PRIMARY KEY AUTO_INCREMENT,
  `col1` INT,
  `dyncols` MEDIUMBLOB
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 DYNAMIC_COLUMNS=1;

INSERT INTO `dynamic_columns_test` (`col1`, `dyncols`) VALUES
(1, COLUMN_CREATE('key1', 'value1', 'key2', 123)),
(2, COLUMN_CREATE('key3', 45.6, 'key4', 'value4'));

SELECT COLUMN_GET(`dyncols`, 'key1' AS CHAR) FROM `dynamic_columns_test`;

CREATE TABLE `temporal_table` (
    `id` INT PRIMARY KEY,
    `data` VARCHAR(255),
    `valid_from` DATETIME GENERATED ALWAYS AS ROW START,
    `valid_to` DATETIME GENERATED ALWAYS AS ROW END,
    PERIOD FOR `system_time` (`valid_from`, `valid_to`)
) WITH SYSTEM VERSIONING;

INSERT INTO `temporal_table` (`id`, `data`) VALUES
(1, 'Initial data');

UPDATE `temporal_table` SET `data` = 'Updated data' WHERE `id` = 1;

SELECT * FROM `temporal_table` FOR SYSTEM_TIME ALL;